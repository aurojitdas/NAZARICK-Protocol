<Window x:Class="NAZARICK_Protocol.VirusTotalResultsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="N.A.Z.A.R.I.C.K. Protocol - VirusTotal Analysis Results" 
        Height="750" 
        Width="950"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#FAFAFA">

    <Grid>
        <!-- Header Section -->
        <Grid Height="120" VerticalAlignment="Top" Background="White">
            <Grid.Effect>
                <DropShadowEffect Color="Black" Direction="270" ShadowDepth="1" Opacity="0.1" BlurRadius="3"/>
            </Grid.Effect>

            <StackPanel Margin="40,30,40,20" VerticalAlignment="Center">
                <TextBlock x:Name="txtTitle" 
                           Text="VirusTotal Analysis"
                           FontSize="28"
                           FontWeight="SemiBold"
                           Foreground="#333333"
                           Margin="0,0,0,5"/>

                <TextBlock x:Name="txtStatus" 
                           Text="Scan completed"
                           FontSize="14"
                           Foreground="#666666"/>
            </StackPanel>
        </Grid>

        <!-- Loading Section -->
        <Grid x:Name="LoadingSection" Margin="40,140,40,80" Visibility="Visible">
            <Border Background="White" 
                    CornerRadius="8" 
                    BorderBrush="#E0E0E0" 
                    BorderThickness="1">
                <Border.Effect>
                    <DropShadowEffect Color="Black" Direction="270" ShadowDepth="2" Opacity="0.08" BlurRadius="8"/>
                </Border.Effect>

                <Grid Margin="30">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                        <!-- Loading Animation -->
                        <Grid Width="80" Height="80" Margin="0,0,0,30">
                            <Ellipse x:Name="LoadingRing1" 
                                     Width="60" Height="60" 
                                     Stroke="#007BFF" 
                                     StrokeThickness="4" 
                                     StrokeDashArray="15,15"
                                     Opacity="0.8">
                                <Ellipse.RenderTransform>
                                    <RotateTransform x:Name="LoadingRotate1" CenterX="30" CenterY="30"/>
                                </Ellipse.RenderTransform>
                                <Ellipse.Triggers>
                                    <EventTrigger RoutedEvent="Loaded">
                                        <BeginStoryboard>
                                            <Storyboard RepeatBehavior="Forever">
                                                <DoubleAnimation Storyboard.TargetName="LoadingRotate1"
                                                               Storyboard.TargetProperty="Angle"
                                                               From="0" To="360" Duration="0:0:2"/>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Ellipse.Triggers>
                            </Ellipse>

                            <Ellipse x:Name="LoadingRing2" 
                                     Width="40" Height="40" 
                                     Stroke="#28A745" 
                                     StrokeThickness="3" 
                                     StrokeDashArray="10,10"
                                     Opacity="0.6">
                                <Ellipse.RenderTransform>
                                    <RotateTransform x:Name="LoadingRotate2" CenterX="20" CenterY="20"/>
                                </Ellipse.RenderTransform>
                                <Ellipse.Triggers>
                                    <EventTrigger RoutedEvent="Loaded">
                                        <BeginStoryboard>
                                            <Storyboard RepeatBehavior="Forever">
                                                <DoubleAnimation Storyboard.TargetName="LoadingRotate2"
                                                               Storyboard.TargetProperty="Angle"
                                                               From="360" To="0" Duration="0:0:1.5"/>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Ellipse.Triggers>
                            </Ellipse>
                        </Grid>

                        <!-- Loading Text -->
                        <TextBlock x:Name="txtLoadingMessage" 
                                   Text="Analyzing file..."
                                   FontSize="18"
                                   FontWeight="SemiBold"
                                   Foreground="#333333"
                                   HorizontalAlignment="Center"
                                   Margin="0,0,0,15"/>

                        <TextBlock x:Name="txtLoadingDetails" 
                                   Text="Please wait while VirusTotal analyzes your file"
                                   FontSize="14"
                                   Foreground="#666666"
                                   HorizontalAlignment="Center"
                                   Margin="0,0,0,20"/>

                        <!-- Progress Information -->
                        <StackPanel x:Name="ProgressInfo" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,20">
                            <TextBlock Text="Elapsed Time: " FontSize="12" Foreground="#666666"/>
                            <TextBlock x:Name="txtElapsedTime" Text="0s" FontSize="12" Foreground="#333333" FontWeight="SemiBold"/>
                        </StackPanel>


                    </StackPanel>
                </Grid>
            </Border>
        </Grid>

        <!-- Results Content Section -->
        <Grid x:Name="ResultsSection" Margin="40,140,40,80" Visibility="Collapsed">
            <Border Background="White" 
                    CornerRadius="8" 
                    BorderBrush="#E0E0E0" 
                    BorderThickness="1">
                <Border.Effect>
                    <DropShadowEffect Color="Black" Direction="270" ShadowDepth="2" Opacity="0.08" BlurRadius="8"/>
                </Border.Effect>

                <Grid Margin="30">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Detection Summary Section -->
                    <StackPanel Grid.Row="0" Margin="0,0,0,25">
                        <TextBlock Text="Detection Summary" 
                                   FontSize="16" 
                                   FontWeight="SemiBold" 
                                   Foreground="#333333" 
                                   Margin="0,0,0,15"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Malicious -->
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Malicious" FontSize="12" Foreground="#666666" Margin="0,0,0,5"/>
                                <TextBlock x:Name="txtMaliciousCount" Text="0" FontSize="24" FontWeight="Bold" Foreground="#DC3545"/>
                            </StackPanel>

                            <!-- Suspicious -->
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="Suspicious" FontSize="12" Foreground="#666666" Margin="0,0,0,5"/>
                                <TextBlock x:Name="txtSuspiciousCount" Text="0" FontSize="24" FontWeight="Bold" Foreground="#FFC107"/>
                            </StackPanel>

                            <!-- Clean -->
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Clean" FontSize="12" Foreground="#666666" Margin="0,0,0,5"/>
                                <TextBlock x:Name="txtCleanCount" Text="0" FontSize="24" FontWeight="Bold" Foreground="#28A745"/>
                            </StackPanel>

                            <!-- Total Engines -->
                            <StackPanel Grid.Column="3">
                                <TextBlock Text="Total Engines" FontSize="12" Foreground="#666666" Margin="0,0,0,5"/>
                                <TextBlock x:Name="txtTotalEngines" Text="0" FontSize="24" FontWeight="Bold" Foreground="#333333"/>
                            </StackPanel>

                            <!-- Threat Level -->
                            <StackPanel Grid.Column="4">
                                <TextBlock Text="Threat Level" FontSize="12" Foreground="#666666" Margin="0,0,0,5"/>
                                <StackPanel Orientation="Horizontal">
                                    <Ellipse x:Name="threatIndicator" Width="12" Height="12" Fill="#28A745" Margin="0,2,8,0"/>
                                    <TextBlock x:Name="txtThreatLevel" Text="Clean" FontSize="14" FontWeight="SemiBold" Foreground="#28A745"/>
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </StackPanel>

                    <!-- File Information Section -->
                    <StackPanel Grid.Row="1" Margin="0,0,0,0">
                        <TextBlock Text="File Information" 
                                   FontSize="16" 
                                   FontWeight="SemiBold" 
                                   Foreground="#333333" 
                                   Margin="0,0,0,15"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                <TextBlock Text="File Name" FontSize="12" Foreground="#666666" Margin="0,0,0,3"/>
                                <TextBlock x:Name="txtFileName" Text="-" FontSize="14" FontWeight="SemiBold" TextWrapping="Wrap" Margin="0,0,0,15"/>

                                <TextBlock Text="File Size" FontSize="12" Foreground="#666666" Margin="0,0,0,3"/>
                                <TextBlock x:Name="txtFileSize" Text="-" FontSize="14" Margin="0,0,0,15"/>

                                <TextBlock Text="Last Analysis" FontSize="12" Foreground="#666666" Margin="0,0,0,3"/>
                                <TextBlock x:Name="txtLastAnalysis" Text="-" FontSize="14" Margin="0,0,0,15"/>

                                <TextBlock Text="Threat Classification" FontSize="12" Foreground="#666666" Margin="0,0,0,3"/>
                                <TextBlock x:Name="txtThreatLabel" Text="-" FontSize="14" FontWeight="SemiBold" Margin="0,0,0,15"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1">
                                <TextBlock Text="SHA256" FontSize="12" Foreground="#666666" Margin="0,0,0,3"/>
                                <TextBlock x:Name="txtSha256" Text="-" FontSize="11" FontFamily="Consolas" TextWrapping="Wrap" Margin="0,0,0,15"/>

                                <TextBlock Text="MD5" FontSize="12" Foreground="#666666" Margin="0,0,0,3"/>
                                <TextBlock x:Name="txtMd5" Text="-" FontSize="11" FontFamily="Consolas" Margin="0,0,0,15"/>

                                <TextBlock Text="VirusTotal Report" FontSize="12" Foreground="#666666" Margin="0,0,0,3"/>
                                <TextBlock x:Name="txtPermalink" Text="View Full Report" FontSize="14" Foreground="#007BFF" 
                                          TextDecorations="Underline" Cursor="Hand" MouseLeftButtonUp="Permalink_Click"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>

        <!-- Bottom Action Bar -->
        <Border Height="60" 
                VerticalAlignment="Bottom" 
                Background="White" 
                BorderBrush="#E0E0E0" 
                BorderThickness="0,1,0,0">

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="40,0">
                <Button x:Name="btnViewReport"
                        Content="View Full Report"
                        Width="140"
                        Height="36"
                        Margin="0,0,15,0"
                        Background="#007BFF"
                        Foreground="White"
                        BorderThickness="0"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Cursor="Hand"
                        Click="BtnViewReport_Click">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Background" Value="#007BFF"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}" 
                                                CornerRadius="6">
                                            <ContentPresenter HorizontalAlignment="Center" 
                                                            VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#0056B3"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <Button x:Name="btnClose"
                        Content="Close"
                        Width="100"
                        Height="36"
                        Background="#FF5A5A"
                        Foreground="White"
                        BorderThickness="0"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Cursor="Hand"
                        Click="BtnClose_Click">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Background" Value="#FF5A5A"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}" 
                                                CornerRadius="6">
                                            <ContentPresenter HorizontalAlignment="Center" 
                                                            VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#FF4444"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </StackPanel>
        </Border>
    </Grid>
</Window>