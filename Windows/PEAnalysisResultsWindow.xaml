<!-- PEAnalysisResultsWindow.xaml -->
<Window x:Class="NAZARICK_Protocol.UI.PEAnalysisResultsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="N.A.Z.A.R.I.C.K. Protocol - PE Analysis Results" 
        Height="650" 
        Width="900"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#FAFAFA">

    <Grid>
        <!-- Header Section -->
        <Grid Height="120" VerticalAlignment="Top" Background="White">
            <Grid.Effect>
                <DropShadowEffect Color="Black" Direction="270" ShadowDepth="1" Opacity="0.1" BlurRadius="3"/>
            </Grid.Effect>

            <StackPanel Margin="40,30,40,20" VerticalAlignment="Center">
                <TextBlock x:Name="txtTitle" 
                           Text="PE File Analysis"
                           FontSize="28"
                           FontWeight="SemiBold"
                           Foreground="#333333"
                           Margin="0,0,0,5"/>

                <TextBlock x:Name="txtStatus" 
                           Text="Analysis completed"
                           FontSize="14"
                           Foreground="#666666"/>
            </StackPanel>
        </Grid>

        <!-- Content Section -->
        <Grid Margin="40,140,40,80">
            <Border Background="White" 
                    CornerRadius="8" 
                    BorderBrush="#E0E0E0" 
                    BorderThickness="1">
                <Border.Effect>
                    <DropShadowEffect Color="Black" Direction="270" ShadowDepth="2" Opacity="0.08" BlurRadius="8"/>
                </Border.Effect>

                <Grid Margin="30">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Summary Section -->
                    <StackPanel Grid.Row="0" Margin="0,0,0,20">
                        <TextBlock Text="Analysis Summary" 
                                   FontSize="16" 
                                   FontWeight="SemiBold" 
                                   Foreground="#333333" 
                                   Margin="0,0,0,15"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- File Status -->
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="File Status" FontSize="12" Foreground="#666666" Margin="0,0,0,5"/>
                                <StackPanel Orientation="Horizontal">
                                    <Ellipse x:Name="statusIndicator" Width="8" Height="8" Fill="#28A745" Margin="0,0,8,0"/>
                                    <TextBlock x:Name="txtFileStatus" Text="Valid PE" FontSize="14" FontWeight="SemiBold"/>
                                </StackPanel>
                            </StackPanel>

                            <!-- Suspicious Imports -->
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="Suspicious Imports" FontSize="12" Foreground="#666666" Margin="0,0,0,5"/>
                                <TextBlock x:Name="txtSuspiciousCount" Text="0" FontSize="18" FontWeight="Bold" Foreground="#333333"/>
                            </StackPanel>

                            <!-- Section Anomalies -->
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Section Anomalies" FontSize="12" Foreground="#666666" Margin="0,0,0,5"/>
                                <TextBlock x:Name="txtAnomaliesCount" Text="0" FontSize="18" FontWeight="Bold" Foreground="#333333"/>
                            </StackPanel>

                            <!-- Overall Risk -->
                            <StackPanel Grid.Column="3">
                                <TextBlock Text="Risk Level" FontSize="12" Foreground="#666666" Margin="0,0,0,5"/>
                                <TextBlock x:Name="txtRiskLevel" Text="Low" FontSize="14" FontWeight="SemiBold" Foreground="#28A745"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>

                    <!-- Detailed Results -->
                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                        <RichTextBox x:Name="rtbResults"
                                     IsReadOnly="True"
                                     Background="Transparent"
                                     BorderThickness="0"
                                     Padding="0"
                                     FontFamily="Consolas"
                                     FontSize="12"
                                     VerticalAlignment="Stretch"/>
                    </ScrollViewer>
                </Grid>
            </Border>
        </Grid>

        <!-- Bottom Action Bar -->
        <Border Height="60" 
                VerticalAlignment="Bottom" 
                Background="White" 
                BorderBrush="#E0E0E0" 
                BorderThickness="0,1,0,0">

            <Button x:Name="btnClose"
                    Content="Close"
                    Width="100"
                    Height="36"
                    HorizontalAlignment="Right"
                    Margin="0,0,40,0"
                    Background="#FF5A5A"
                    Foreground="White"
                    BorderThickness="0"
                    FontSize="14"
                    FontWeight="SemiBold"
                    Cursor="Hand"
                    Click="BtnClose_Click">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="#FF5A5A"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" 
                                            CornerRadius="6">
                                        <ContentPresenter HorizontalAlignment="Center" 
                                                        VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF4444"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </Border>
    </Grid>
</Window>